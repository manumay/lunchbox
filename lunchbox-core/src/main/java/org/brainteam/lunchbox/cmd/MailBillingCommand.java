package org.brainteam.lunchbox.cmd;import java.util.List;import org.brainteam.lunchbox.i18n.Translator;import org.brainteam.lunchbox.json.JsonOrdersBilling;import org.brainteam.lunchbox.services.MailService;import org.brainteam.lunchbox.services.ReportService;import org.brainteam.lunchbox.util.DateUtils;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.context.annotation.Scope;import org.springframework.stereotype.Component;@Component("mailbilling")@Scope("prototype")public class MailBillingCommand implements Command {		static final String NAME = "action.mailbilling.name";		@Autowired	private ReportService reportService;		@Autowired	private MailService mailService;		@Autowired	private Translator translator;	@Override	public String getName() {		return getTranslator().t(NAME);	}	@Override	public void execute() throws CommandException {		try {			int month = DateUtils.lastMonth();			int year = DateUtils.lastMonthYear();			List<JsonOrdersBilling> json = getReportService().getBillingReportJson(month, year, 12);			getMailService().mailBilling(json);		} catch (RuntimeException e) {			throw new CommandException(e);		}	}		protected ReportService getReportService() {		return reportService;	}		protected MailService getMailService() {		return mailService;	}		protected Translator getTranslator() {		return translator;	}}